const getForm=document.querySelector("#form"),searchInput=document.querySelector("#search"),songsContainer=document.querySelector("#songs-container"),prevAndNextContainer=document.querySelector("#prev-and-next-container"),lyricsURL="https://api.lyrics.ovh";async function fetchAPI(n){const t=await fetch(n);return await t.json()}function handleFormSubmit(n){n.preventDefault();const t=searchInput.value.trim();searchInput.value="",searchInput.focus(),t?fetchSongs(t):songsContainer.innerHTML='\n    <li class="warning-message">\n      Por favor, insira o nome de uma música para prosseguir!\n    </li>'}async function fetchSongs(n){insertSongsIntoPage(await fetchAPI(`${lyricsURL}/suggest/${n}`))}function insertSongsIntoPage({data:n,prev:t,next:e}){songsContainer.innerHTML=n.map(({title:n,artist:{name:t}})=>`\n    <li class="song">\n      <span class="song-artist">\n      ${n} - \n          <strong>\n            ${t}\n          </strong>\n        </span>\n        <button class="btn" data-artist="${t}" data-song-title="${n}">\n          Ver letra\n        </button>\n    </li>\n    <hr class="solid">\n    `).join(""),t||e?insertButtonOpenMoreSongsIntoPage({prev:t,next:e}):prevAndNextContainer.innerHTML=""}function insertButtonOpenMoreSongsIntoPage({prev:n,next:t}){prevAndNextContainer.innerHTML=`\n    ${n?`<button class="btn" onClick="openMoreSongs('${n}')">Anteriores</button>`:""}\n    ${t?`<button class="btn" onClick="openMoreSongs('${t}')">Próximas</button>`:""}\n  `}async function openMoreSongs(n){insertSongsIntoPage(await fetchAPI(`https://cors-anywhere.herokuapp.com/${n}`))}function handleSongsContainerClick(n){const t=n.target;if("BUTTON"===t.tagName){searchMusicLyrics(t.getAttribute("data-artist"),t.getAttribute("data-song-title"))}}async function searchMusicLyrics(n,t){const e=await fetchAPI(`${lyricsURL}/v1/${n}/${t}`),{lyrics:s}=e;insertLyricsIntoSongsContainer({lyricsFormat:s.replace(/(\r\n|\r|\n)/g,"<br>"),artist:n,songTitle:t})}function insertLyricsIntoSongsContainer({lyricsFormat:n,artist:t,songTitle:e}){songsContainer.innerHTML=`\n  <li class="lyrics-container">\n    <h2>\n      <strong>\n        ${e}\n      </strong>\n      - ${t}\n    </h2>\n    <p class="lyrics">${n}</p>\n  </li>`,songsContainer&&(prevAndNextContainer.innerHTML="")}form.addEventListener("submit",handleFormSubmit),songsContainer.addEventListener("click",handleSongsContainerClick);